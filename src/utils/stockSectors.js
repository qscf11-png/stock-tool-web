// Comprehensive Stock Sector Mapping
// Covering major TWSE/TPEx stocks and providing fallback heuristics

export const stockSectorMap = {
    // --- 半導體 (Semiconductor) ---
    '2330': '半導體', '2454': '半導體', '2303': '半導體', '3711': '半導體', '3034': '半導體',
    '3035': '半導體', '2379': '半導體', '3443': '半導體', '6415': '半導體', '5274': '半導體',
    '6531': '半導體', '6147': '半導體', '8299': '半導體', '3293': '半導體', '3231': '半導體',
    '8069': '半導體', '3529': '半導體', '3661': '半導體', '6533': '半導體', '4966': '半導體',
    '3532': '半導體', '5347': '半導體', '3105': '半導體', '3006': '半導體', '2401': '半導體',
    '2449': '半導體', '6271': '半導體', '8150': '半導體', '3016': '半導體', '2344': '半導體',

    // --- 電腦及週邊 (Computer & Peripheral) ---
    '2317': '電腦及週邊', '2357': '電腦及週邊', '3231': '電腦及週邊', '2382': '電腦及週邊',
    '2353': '電腦及週邊', '2356': '電腦及週邊', '2324': '電腦及週邊', '4938': '電腦及週邊',
    '5269': '電腦及週邊', '6669': '電腦及週邊', '2376': '電腦及週邊', '2377': '電腦及週邊',
    '2395': '電腦及週邊', '2301': '電腦及週邊', '3706': '電腦及週邊', '3017': '電腦及週邊',
    '2365': '電腦及週邊', '6176': '電腦及週邊', '6214': '電腦及週邊', '3515': '電腦及週邊',
    '3701': '電腦及週邊', '2331': '電腦及週邊',

    // --- 金融保險 (Financial) ---
    '2881': '金融保險', '2882': '金融保險', '2886': '金融保險', '2891': '金融保險', '2884': '金融保險',
    '2885': '金融保險', '2892': '金融保險', '2880': '金融保險', '2890': '金融保險', '2883': '金融保險',
    '2887': '金融保險', '5880': '金融保險', '2834': '金融保險', '2812': '金融保險', '2801': '金融保險',
    '2838': '金融保險', '2809': '金融保險', '2845': '金融保險', '2888': '金融保險', '2889': '金融保險',
    '2867': '金融保險', '5871': '金融保險', '6005': '金融保險', '2855': '金融保險',

    // --- 光電 (Optoelectronic) ---
    '3008': '光電', '2409': '光電', '3481': '光電', '4961': '光電', '6456': '光電',
    '6168': '光電', '6278': '光電', '4956': '光電', '2438': '光電', '3362': '光電',
    '6120': '光電', '4976': '光電', '4906': '光電',

    // --- 電子零組件 (Electronic Parts) ---
    '2308': '電子零組件', '3037': '電子零組件', '2368': '電子零組件', '4958': '電子零組件',
    '2354': '電子零組件', '3044': '電子零組件', '2474': '電子零組件', '6269': '電子零組件',
    '2313': '電子零組件', '5469': '電子零組件', '2337': '電子零組件', '2492': '電子零組件',
    '3653': '電子零組件', '2383': '電子零組件', '3023': '電子零組件', '2360': '電子零組件',

    // --- 通信網路 (Communications) ---
    '2412': '通信網路', '3045': '通信網路', '4904': '通信網路', '2345': '通信網路', '5388': '通信網路',
    '3704': '通信網路', '2450': '通信網路', '4977': '通信網路', '2314': '通信網路', '6285': '通信網路',
    '2332': '通信網路',

    // --- 航運 (Shipping) ---
    '2603': '航運', '2609': '航運', '2615': '航運', '2637': '航運', '2618': '航運', '2610': '航運',
    '2606': '航運', '2605': '航運', '2634': '航運', '5608': '航運', '2636': '航運',

    // --- 鋼鐵 (Iron & Steel) ---
    '2002': '鋼鐵', '2006': '鋼鐵', '2014': '鋼鐵', '2049': '鋼鐵', '2010': '鋼鐵', '2027': '鋼鐵',

    // --- 塑膠 / 化工 (Plastic/Chemical) ---
    '1301': '塑膠', '1303': '塑膠', '1326': '塑膠', '1304': '塑膠', '1308': '塑膠',
    '1710': '化工', '1704': '化工', '1722': '化工', '1773': '化工',

    // --- 水泥 (Cement) ---
    '1101': '水泥', '1102': '水泥', '1108': '水泥',

    // --- 生技醫療 (Biotech) ---
    '1795': '生技醫療', '4128': '生技醫療', '4743': '生技醫療', '6446': '生技醫療', '6547': '生技醫療',
    '4164': '生技醫療', '4105': '生技醫療', '4123': '生技醫療', '4119': '生技醫療', '1734': '生技醫療',

    // --- 傳產與其他 (Traditional/Others) ---
    '2912': '貿易百貨', '2207': '汽車', '9910': '製鞋', '9904': '製鞋',
    '1216': '食品', '1227': '食品', '1201': '食品',
    '1402': '紡織', '1476': '紡織',
    '2501': '建材營造', '2542': '建材營造', '5522': '建材營造', '2520': '建材營造',
    '9940': '其他', '9941': '其他', '6505': '油電燃氣'
};

// Keyword mapping for name-based guessing
const keywordMap = [
    { key: ['金', '銀', '保險', '證券', '投信', '壽'], sector: '金融保險' },
    { key: ['半導', '電路', '晶', '矽', 'IC'], sector: '半導體' },
    { key: ['電', '光', '網', '通', '訊', '科', '技'], sector: '電子/科技' },
    { key: ['藥', '醫', '生技'], sector: '生技醫療' },
    { key: ['海', '運', '船', '航'], sector: '航運' },
    { key: ['鋼', '鐵', '鋁'], sector: '鋼鐵' },
    { key: ['建', '營造', '地產'], sector: '建材營造' },
    { key: ['紡', '纖'], sector: '紡織' },
    { key: ['食', '味', '品'], sector: '食品' },
    { key: ['車', '汽', '輪'], sector: '汽車' },
    // Fallback checks
    { key: ['債', 'ETF', '高股息', '50', '56', '878'], sector: 'ETF' }
];

export const getSectorBySymbol = (symbol, name = '') => {
    // 1. Direct symbol match (Fastest & Most Accurate)
    if (stockSectorMap[symbol]) return stockSectorMap[symbol];

    // 2. ETF Detection (00xxx)
    if (symbol.startsWith('00')) return 'ETF';

    // 3. Name-based Keyword Matching (If name is provided)
    if (name) {
        for (const item of keywordMap) {
            if (item.key.some(k => name.includes(k))) {
                return item.sector;
            }
        }
    }

    // 4. Number-based Heuristics (Rough fallback)
    const num = parseInt(symbol);
    if (!isNaN(num)) {
        if (num >= 2300 && num < 2500) return '電子工業';
        if (num >= 2800 && num < 2900) return '金融保險';
        if (num >= 2600 && num < 2700) return '航運';
        if (num >= 1300 && num < 1400) return '塑膠工業';
        if (num >= 1100 && num < 1200) return '水泥工業';
        if (num >= 1200 && num < 1300) return '食品工業';
        if (num >= 1700 && num < 1800) return '化工/生技';
    }

    // 5. Last resort
    return '一般產業';
};
